generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model issues {
  id            Int             @id @default(autoincrement())
  site_id       Int
  status        issues_status   @default(new)
  priority      issues_priority @default(medium)
  description   String          @db.Text
  contact_email String?         @db.VarChar(255)
  url           String          @db.Text
  user_agent    String?         @db.Text
  viewport      String?         @db.VarChar(20)
  diagnostics   Json?
  created_at    DateTime?       @default(now()) @db.Timestamp(0)
  sites         sites           @relation(fields: [site_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "issues_ibfk_1")

  @@index([site_id], map: "site_id")
}

model sites {
  id         Int      @id @default(autoincrement())
  site_name  String?  @db.VarChar(255)
  site_url   String?  @db.VarChar(255)
  created_at DateTime @default(now()) @db.Timestamp(0)
  issues     issues[]
}

model users {
  id             Int      @id @default(autoincrement()) @db.UnsignedInt
  username       String?  @db.VarChar(255)
  user_mail      String?  @db.VarChar(255)
  hashedPassword String?  @db.LongText
  created_at     DateTime @default(now()) @db.Timestamp(0)
}

enum issues_status {
  new
  in_progress
  resolved
  wont_fix
}

enum issues_priority {
  low
  medium
  high
  critical
}
